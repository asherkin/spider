var saveAs=saveAs||typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i=!e.externalHost&&"download"in r,s=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},o=e.webkitRequestFileSystem,u=e.requestFileSystem||o||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f="application/octet-stream",l=0,c=10,h=function(t){var r=function(){if(typeof t==="string"){n().revokeObjectURL(t)}else{t.remove()}};if(e.chrome){r()}else{setTimeout(r,c)}},p=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){a(s)}}}},d=function(t,a){var c=this,d=t.type,v=false,m,g,y=function(){p(c,"writestart progress write writeend".split(" "))},b=function(){if(v||!m){m=n().createObjectURL(t)}if(g){g.location.href=m}else{var r=e.open(m,"_blank");if(r==undefined&&typeof safari!=="undefined"){e.location.href=m}}c.readyState=c.DONE;y();h(m)},w=function(e){return function(){if(c.readyState!==c.DONE){return e.apply(this,arguments)}}},E={create:true,exclusive:false},S;c.readyState=c.INIT;if(!a){a="download"}if(i){m=n().createObjectURL(t);r.href=m;r.download=a;s(r);c.readyState=c.DONE;y();h(m);return}if(e.chrome&&d&&d!==f){S=t.slice||t.webkitSlice;t=S.call(t,0,t.size,f);v=true}if(o&&a!=="download"){a+=".download"}if(d===f||o){g=e}if(!u){b();return}l+=t.size;u(e.TEMPORARY,l,w(function(e){e.root.getDirectory("saved",E,w(function(e){var n=function(){e.getFile(a,E,w(function(e){e.createWriter(w(function(n){n.onwriteend=function(t){g.location.href=e.toURL();c.readyState=c.DONE;p(c,"writeend",t);h(e)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){b()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=c["on"+e]});n.write(t);c.abort=function(){n.abort();c.readyState=c.DONE};c.readyState=c.WRITING}),b)}),b)};e.getFile(a,{create:false},w(function(e){e.remove();n()}),w(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{b()}}))}),b)}),b)},v=d.prototype,m=function(e,t){return new d(e,t)};v.abort=function(){var e=this;e.readyState=e.DONE;p(e,"abort")};v.readyState=v.INIT=0;v.WRITING=1;v.DONE=2;v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module!==null){module.exports=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!=null){define([],function(){return saveAs})}
